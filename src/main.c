#include <Arduino.h>
#include <stdio.h>

#include "modules/ads1115.h"

#define SERIAL_BAUD 57600

void setup() {
    Serial_begin(SERIAL_BAUD);
    ADS1115Init();
}

void loop() {
    int16_t ain0 = ADS1115Read(
        ADS1115_MUX_SINGLE_0_GND, ADS1115_PGA_6_144V, ADS1115_DATARATE_860,
        ADS1115_COMP_MODE_WINDOW, ADS1115_COMP_POL_ACTIVE_HIGH,
        ADS1115_COMP_NON_LATCH, ADS1115_COMP_QUEUE_DISABLE);
    int16_t ain1 = ADS1115Read(
        ADS1115_MUX_SINGLE_1_GND, ADS1115_PGA_6_144V, ADS1115_DATARATE_860,
        ADS1115_COMP_MODE_WINDOW, ADS1115_COMP_POL_ACTIVE_HIGH,
        ADS1115_COMP_NON_LATCH, ADS1115_COMP_QUEUE_DISABLE);
    int16_t ain2 = ADS1115Read(
        ADS1115_MUX_SINGLE_2_GND, ADS1115_PGA_6_144V, ADS1115_DATARATE_860,
        ADS1115_COMP_MODE_WINDOW, ADS1115_COMP_POL_ACTIVE_HIGH,
        ADS1115_COMP_NON_LATCH, ADS1115_COMP_QUEUE_DISABLE);
    int16_t ain3 = ADS1115Read(
        ADS1115_MUX_SINGLE_3_GND, ADS1115_PGA_6_144V, ADS1115_DATARATE_860,
        ADS1115_COMP_MODE_WINDOW, ADS1115_COMP_POL_ACTIVE_HIGH,
        ADS1115_COMP_NON_LATCH, ADS1115_COMP_QUEUE_DISABLE);

    uint8_t buffer[20];
    sprintf(buffer, "%d, %d, %d, %d\n", ain0, ain1, ain2, ain3);

    Serial_println(buffer);
}
